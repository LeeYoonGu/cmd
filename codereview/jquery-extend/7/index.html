<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>test</title>
</head>
<body>

<h2>jQuery 플러그인</h2>
<div id="div_spinbox_area">
</div>
<a href="#" id="a_spinbox_plus">+</a>
<a href="#" id="a_spinbox_minus">-</a>

<h2>jQuery 플러그인2</h2>
<div id="div_spinbox_area2">
</div>
<a href="#" id="a_spinbox_plus2">+</a>
<a href="#" id="a_spinbox_minus2">-</a>
<br><br>
<a href="#" id="a_kkak">깍두기 버튼</a>

<script src="http://sukmin.github.io/cmd/codereview/jquery-extend/js/jquery-1.11.2.min.js" type="text/javascript"></script>
<script type="text/javascript">
(function($){

    $.oSpinboxDefaultOptions = {
        sPlusButtonSelector : "#a_spinbox_plus",
        sMinusButtonSelector : "#a_spinbox_minus"
    };

function Spinbox(sCountAreaSelector,sPlusButtonSelector,sMinusButtonSelector){
    this.nCount = 0;
    this.$sCountArea = null;
    this.$sPlusButton = null;
    this.$sMinusButton = null;

    

    (function(oSelf){

        oSelf.$sCountArea = jQuery(sCountAreaSelector);
        oSelf.$sPlusButton = jQuery(sPlusButtonSelector);
        oSelf.$sMinusButton = jQuery(sMinusButtonSelector);

        oSelf.$sPlusButton.click(function(event){
            event.preventDefault();
            oSelf.plus();
        });

        oSelf.$sMinusButton.click(function(event){
            event.preventDefault();
            oSelf.minus();
        });

        oSelf.draw();
    })(this);
}

Spinbox.prototype.draw = function(){
        this.$sCountArea.html(this.nCount);
};

Spinbox.prototype.plus = function(){
        this.nCount++;
        this.draw();
};

Spinbox.prototype.minus = function(){
        this.nCount--;
        this.draw();
};

    $.fn.spinbox = function(oOptions){

        //변경된 부분
        oOptions = $.extend(null,$.oSpinboxDefaultOptions,oOptions);

        this.each(function(index){
            // 사실 스핀박스 안에서 근본적으로 옵션처리를 해주면 된다.
            var oSpinbox = new Spinbox(this,oOptions.sPlusButtonSelector,oOptions.sMinusButtonSelector);
            $(this).data("spinbox",oSpinbox);
        });
        return this;
    };

    $.fn.plusForSpinbox = function(){

        this.each(function(index){
            var oSpinbox = $(this).data("spinbox");
            if(oSpinbox){
                oSpinbox.plus();
            }
        });
        return this;
        
    };

})(jQuery);

jQuery("#div_spinbox_area").spinbox();
jQuery("#div_spinbox_area2").spinbox({
    sPlusButtonSelector : "#a_spinbox_plus2",
    sMinusButtonSelector : "#a_spinbox_minus2"
});

jQuery("#a_kkak").click(function(event){
    event.preventDefault();
    jQuery("#div_spinbox_area2").plusForSpinbox();
});
</script>
</body>
</html>
